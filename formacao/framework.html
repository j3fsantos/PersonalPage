<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Structuring your JavaScript Programs</title>
	
	<meta name="description" content="Introduction to JavaScript">
	<meta name="viewport" content="width=1024, user-scalable=no">
	
	<!-- Core and extension CSS files -->
	<link rel="stylesheet" href="deck.js/core/deck.core.css">
	<link rel="stylesheet" href="deck.js/extensions/goto/deck.goto.css">
	<link rel="stylesheet" href="deck.js/extensions/menu/deck.menu.css">
	<link rel="stylesheet" href="deck.js/extensions/navigation/deck.navigation.css">
	<link rel="stylesheet" href="deck.js/extensions/status/deck.status.css">
	<link rel="stylesheet" href="deck.js/extensions/hash/deck.hash.css">

	<!-- include code mirror default css and the theme you want. -->
	<link rel="stylesheet" href="deck.codemirror.css">
	<link rel="stylesheet" href="themes/default.css">

	<!-- Theme CSS files (menu swaps these out) -->
	<link rel="stylesheet" id="transition-theme-link" href="deck.js/themes/transition/horizontal-slide.css">
	
	<link rel="stylesheet" href="introduction.css">	
	
	<!-- Tooltipster CSS theme --> 
	<link rel="stylesheet" type="text/css" href="tooltipster/css/tooltipster.css" />
	
	<!-- My style -->
	<style type="text/css">
            .myCodeDiv {
	        font-size: xx-large; 
		margin: 10px; 
		background-color: #C2D6D6;  
            }
	    
	    .myCodeSpan {
	        font-size: xx-large; 
	    }
	</style> 
	
	<script src="modernizr.custom.js"></script>
</head>

<body>
	<article class="deck-container">
	
	<section class="slide" id="js-data-types">
	<h1>Views and Templating</h1>
	</section> 
	
	<section class="slide" id="js-data-types">
	<h2>Views and Templating</h2>
	<h3>Using templates in JavaScript:</h3> 
<div><textarea id="code" name="code" class="code" mode="javascript" style="display: none;" runnable="true"
>var object = {
   url: 'http://example.com', 
   getName: function(){return 'Trevor';}
}
var template = '<li><a href='${url}'>${getName()}</a></li>'; 
var element = jQuery.tmpl(template, object); 
$('body').append(element); 
</textarea></div> 	
    <br /> 
    <h3>More complex templates:</h3> 
<div><textarea id="code" name="code" class="code" mode="javascript" style="display: none;" runnable="true"
>{{if url}}
   ${url}
 {{/if}}
</textarea></div> 
<div><textarea id="code" name="code" class="code" mode="javascript" style="display: none;" runnable="true"
>{{if messages.length}}
   <!-- Display messages --> 
 {{else}}
    <p>Sorry, there are no messages </p> 
 {{/if}}
</textarea></div>
<div><textarea id="code" name="code" class="code" mode="javascript" style="display: none;" runnable="true"
><ul>
  {{each messages}}
     <li>${$index +1}: <em>${$value}</em></li>
  {{/each}}
 </ul>  
</textarea></div>
	</section> 
	
	<section class="slide" id="js-data-types">
	<h2>Where to define the templates?</h2>
	<h3>In the page...</h3> 
<div><textarea id="code" name="code" class="code" mode="javascript" style="display: none;" runnable="true"
><script type="text/x-jquery-tmpl" id="someTemplate">
  <span>${getName()}</span> 
</script>

<script> 
  var data = {
    getName: function(){ return "Bob"}
  }; 
  var element = $("#someTemplate").tmpl(data);
  element.appendTo($("body"));   
</script> 
</textarea></div> 	
	</section> 
	
	<section class="slide" id="js-data-types">
	<h1>Testing and Debugging</h1>
	</section> 
	
	<section class="slide" id="js-data-types">
	<h2>Unit Testing</h2>
	<h3><em>Assertions</em> indicate the expected result of your code</h3> 
<div><textarea id="code" name="code" class="code" mode="javascript" style="display: none;" runnable="true"
>var assert = function(value, msg) { 
   if(!value)
      throw(msg || (value + "does not equal true"));  
}

var User = {first: function(){return 'foo'}, last: 'bar' }; 
assert(false); 
assert(User.first()); 
</textarea></div> 
    <br />
<div><textarea id="code" name="code" class="code" mode="javascript" style="display: none;" runnable="true"
>var assertEqual = function(val1, val2, msg) { 
   if(val1 !== val2)
      throw(msg || (value + " does not equal " +val2));  
}

assertEqual("one", "one");  
</textarea></div> 
	</section> 
	
	<section class="slide" id="js-data-types">
	<h2>QUnit Testing</h2>
	<h3>Include qunit.js:</h3> 
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
><html>
  <head>
	<meta charset="utf-8">
	<title>QUnit Example</title>
	<link rel="stylesheet" href="/resources/qunit.css">
  </head>
  <body>
	<div id="qunit"></div>
	<div id="qunit-fixture"></div>
	<script src="/resources/qunit.js"></script>
	<script src="/resources/tests.js"></script>
   </body>
</html>
</textarea></div> 
    <br /> 
	<h3>Write your tests:</h3> 
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
><script>
test( "a basic test example", function() {
	var value = "hello";
	equal( value, "hello", "We expect value to be hello" );
});
</script>
</textarea></div> 	
    </section> 
	
	<section class="slide" id="js-data-types">
	<h2>QUnit Testing</h2>
	<h3>Functions that are available for testing: </h3> 
	<ul> 
	  <li><h3>equals(v1, v2, msg): </h3>assertEquals</li>
	  <li><h3>ok(v, msg): </h3>assert</li>
	  <li><h3>same(v1, v2, msg): </h3>deep comparison</li>  	  
	</ul> 
	</section> 
	
	<section class="slide" id="js-data-types">
	<h1>The Spine Library</h1>
	</section> 
	
	<section class="slide" id="js-data-types">
	<h2>The Spine Library</h2>
	<h3>GOAL: Structure your javascript applications using the MVC pattern</h3> 
	<br /> 
	<img src="mvc.jpg" />
	<h3>What does Spine include? </h3>
    <ul> 
	   <li><h3>A class library with inheritance support: <em>Spine.Class</em></h3></li> 
	   <li><h3>An events module: <em>Spine.Events</em></h3> </li>
	   <li><h3>A controller class: <em>Spine.Controller</em></h3> </li>
	   <li><h3>A model class: <em>Spine.Model</em></h3></li>
    </ul> 
    <h3>To use it: include <em>spine.js</em></h3> 	
	</section> 
	
	
	<section class="slide" id="js-data-types">
	<h2>Programming with classes - 1</h2>
	<h3>Spine.Class.create([instanceProperties, classProperties])</h3> 
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>var User = Spine.Class.create({ 
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>var User = Spine.Class.create({ 
   sayYourName: function(){ alert(this.name); }
 }); 
</textarea></div>
    <h3><em>Spine.Class.create()</em> creates a new object whose prototype is Spine.Class</h3>
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>var User = User.create(); 
</textarea></div>
	</section>
	
	<section class="slide" id="js-data-types">
	<h2>Programming with classes - 2</h2>
	<h3>Instantiating a Class: <em>init()</em></h3> 
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>var user = User.init();  
</textarea></div> 	
    <br /> 
	<h3>Specifying initialization: </h3> 
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>var User = Spine.Class.create({
				init: function(name){
					this.name = name;
				}
			});
var user1 = User.init("marina"); 
</textarea></div> 
	</section> 
	
	<section class="slide" id="js-data-types">
	<h2>Programming with classes - 3</h2>
	<h3>Extending Classes:</h3>
    <ul> 
	   <li><h3><em>Instance Properties</em>: include()</h3></li> 
	   <li><h3><em>Class Properties</em>: extend()</h3></li> 
    </ul> 	
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>var Friend = User.create(); 
User.include({
   whatIsYourName: function(){alert('I already told you')} 
});  
Friend.init().whatIsYourName(); 
</textarea></div> 		
	</section> 
	
	<section class="slide" id="js-data-types">
	<h2>Mixing classes with event based programming</h2>
	<h3>If you want your class to suppor events: <em>it must extend Spine.Events</em></h3> 
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>var User = Spine.Class.create(); 
User.extend(Spine.Events); 
</textarea></div> 
    <h3>Spine.Events gives you three functions for handling events: </h3>
    <ul> 
	   <li><h3><em>bind(eventName, callback)</em></h3></li> 
	   <li><h3><em>trigger(eventName)</em></h3></li>
	   <li><h3><em>unbind(eventName, [callback])</em></h3></li>
    </ul>	
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>User.bind("create", function() {/**/});
User.trigger("create");   
</textarea></div> 	
	</section> 
	
	<section class="slide" id="js-data-types">
	<h2>Models and Data - 1</h2>
	<h3>MVC starts with Model...</h3> 
	<h3>To create a new Model: Spine.Model.setup</h3> 
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>var Person = Spine.Model.setup("Person", 
    ["firstName", "lastName", "favoriteBooks", "favoriteColor", "age", "maritalStatus"]); 
</textarea></div>
    <br />
    <h3>Use <em>include()</em> and <em>extend()</em> to add instance and class properties:</h3>  		
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>Person.include({
  addFavoriteBook: function(book){
    this.favoriteBooks.push(book); 
  }
}); 
</textarea></div>
    <br /> 
	<h3>How to save a person? <em>save()</em></h3>
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>var p1 = Person.init({
  firstName: 'carla', 
  lastName: 'moita', 
  favoriteBooks: [], 
  favoriteColor: 'rose', 
  age: 25, 
  maritalStatus: 'single'
});
p1.save();  
</textarea></div>
   </section> 
	
	<section class="slide" id="js-data-types">
	<h2>Models and Data - 2</h2>
	<h3>Finding People</h3>
	<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>var p1 = Person.init({
  firstName: 'carla', 
  lastName: 'moita', 
  favoriteBooks: [], 
  favoriteColor: 'rose', 
  age: 25, 
  maritalStatus: 'single'
});
p1.save();  
alert(p1.id) 
</textarea></div>
	<br /> 
	<h3>When you save a Person, that instance of Person gets an id</h3>  
	<br /> 
	<h3>Teste if a person exists...</h3> 
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>var p1 = Person.init(); 
p1.save();
p1.exists(); 
var p2 = Person.init(); 
p2.exists();  
</textarea></div>
	<br /> 
	<h3>You also can <em>unsave</em> a person: <em>destroy()</em></h3>
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>p = Person.init(); 
p.save(); 
p.destroy();
p.exists(); 
</textarea></div>
    <br /> 
    <h3>How to iterate through all the Person records?</h3> 
	<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>Person.all() 

var snobs = Person.select(function(p){
  return p.favoriteBooks.lenght >= 5; 
}); 

Person.each(function(p){
  p.saySomething(); 
}); 
</textarea></div>	
	</section> 
	
	<section class="slide" id="js-data-types">
	<h2>Models and Data - 3</h2>
	<h3>You can also find a particular person testing for his/her attributes</h3>
    <ul> 
	  <li><h3>first()</h3></li> 
	  <li><h3>findByAttribute()</h3></li>
	  <li><h3>findAllByAttribute()</h3></li> 
	</ul>
	<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>Person.first(); 

Person.findByAttribute("lastName", "santos"); 

Person.findAllByAttribute("lastName", "santos"); 
</textarea></div>
    <br /> 
	<h3>Modifying a particular instance</h3>
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>var p = Person.init(); 
p.updateAttributes({
  firstName: 'ze', 
  lastName: 'manel'
}); 
</textarea></div>	
	</section> 
	
	
	<section class="slide" id="js-data-types">
	<h2>Registering events on models</h2>
    <h3>Model Events</h3> 
    <ul> 
	   <li><h3>You can register events on a model to get callbacks when records change</h3></li>
       <li><h3>You can register events on a particular instance of the model</h3></li> 	   
	</ul>
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>Person.bind("save", function(p){
  console.log("we've just saved a person called: "+p.firstName); 
}) 
var p = Person.init(); 
p.bind("save", function(){ 
   alert("finally i was saved"); 
}); 
</textarea></div>	
	<h3>Supported Events: </h3>
	<ul> 
	   <li><h3><em>save:</em> record was saved</h3></li>
	   <li><h3><em>update:</em> record was updated</h3></li>
	   <li><h3><em>create:</em> record was created</h3> </li>
	   <li><h3><em>destroy:</em> record was destroyed</h3> </li>
	   <li><h3><em>change:</em> record was changed</h3></li>
	   <li><h3><em>refresh:</em> record was replaced</h3></li>
	   <li><h3><em>error:</em> validation field</h3></li>
	</ul>
	</section>
	
	
	<section class="slide" id="js-data-types">
	<h2>Automating Validation</h2>
	<h3>Include a method:</h3>
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>Person.include({
  validate: function() { 
     if(!(this.lastName)) return "lastName is mandatory!"
  } 
}); 
</textarea></div>
    <h3>To handle validations we have to provide an handler for the error event</h3> 
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>Person.bind("error",  
   function(p, msg){
      alert(msg); 
   }); 
</textarea></div>	
    </section>
	
	<section class="slide" id="js-data-types">
	<h2>Controllers</h2>
	<h3>Controllers are the glue that ties everything together</h3>
	<h3>Controllers interact with the page. SO, load controllers after 
	   the page has loaded.</h3> 
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>jQuery(function(){
  window.People = Spine.Controller.create({ 
    // controller properties
  }); 
});
</textarea></div> 	   
    <h3>Controllers always have a DOM element associated with them. Upon instantiation of the controller
	    it should be passed</h3>
    <h3>Inside the controller you can refer to the corresponding DOM element using property <em>el</em> 		
	</section>
	
	
	<section class="slide" id="js-data-types">
	<h2>Instantiating a controller</h2>
	<h3>What do we need?</h3>
    <ul> 
	   <li><h3>The model object(s) associated with the controller</h3></li>
       <li><h3>The DOM element associated withe the controller</h3></li>	   
    </ul>	
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>jQuery(function(){
  window.peopleControler = Spine.Controller.create({ 
    //controller properties
	init: function() { 
	   /*initialization*/
	}, 
	el: $("peopleDiv"), 
	item: Person
  }); 
});
</textarea></div> 	   
	</section> 
	
	
	<section class="slide" id="js-data-types">
	<h2>Controller Events</h2>
	<h3>Simplified way to specify event handlers...</h3>
<div><textarea id="code" name="code" class="code" mode="text/html" style="display: none;" runnable="true"
>var controller = Spine.Controller.create({
   events: {
      "click [data-name]" : this.click
   }, 
   
   init: function(){
      Person.bind("change", this.updateListOfPeople); 
	  /*Register event listeners*/
   }, 
   
   updateListOfPeople: function(){
      /*....*/
   }, 
   
   click: function() { 
      /*....*/
   }
   
});  
</textarea></div> 	   
	</section> 
	
	<section class="slide" id="js-data-types">
	<h2>Controller Events</h2>
	
	
	
	
	<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
	<a href="#" class="deck-next-link" title="Next">&#8594;</a>

		<p class="deck-status">
			<span class="deck-status-current"></span>
			/
			<span class="deck-status-total"></span>
		</p>

		<form action="." method="get" class="goto-form">
			<label for="goto-slide">Go to slide:</label>
			<input type="number" name="slidenum" id="goto-slide">
			<input type="submit" value="Go">
		</form>

		<a href="." title="Permalink to this slide" class="deck-permalink">#</a>
	</article>

	
	<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.js"></script>-->
	<script src="jquery-1.9.0.min.js"></script>
	<script type="text/javascript" src="tooltipster/js/jquery.tooltipster.min.js"></script>
	
	<!-- Deck Core and extensions -->
	<script src="deck.js/core/deck.core.js"></script>
	<script src="deck.js/extensions/menu/deck.menu.js"></script>
	<script src="deck.js/extensions/goto/deck.goto.js"></script>
	<script src="deck.js/extensions/status/deck.status.js"></script>
	<script src="deck.js/extensions/navigation/deck.navigation.js"></script>
	<script src="deck.js/extensions/hash/deck.hash.js"></script>
  
  <!-- include the base codemirror code. -->
  <script src="codemirror.js"></script>
	
	<!-- include the code syntax you want to highlight -->
	<!-- javascript -->
  <script src="mode/javascript/javascript.js"></script>

  <!-- html mode : note code miror requires xml, css and javasript modes for html rendering -->
  <script src="mode/xml/xml.js"></script>
  <script src="mode/css/css.js"></script>
  <script src="mode/htmlmixed/htmlmixed.js"></script>
  
	<script src="deck.codemirror.js"></script>
	
	
	<!-- Stuff specific to this page -->
	<script src="introduction.js"></script>
	
	<script>
        $(document).ready(function() {
            $('.tooltip').tooltipster();
	    var x = $('.myCodeSpan'); 
	    x.css('font-size', 'x-large');
	    x.css('font-weight', 'bold');
		window.action = 'eat';
		window.eatIt = function(){ alert('eat'); }; 
		window.drinkIt = function() { alert('drink'); };
		window.getObject = function() { return {} }; 
        });
       </script>
   

</body>
</html>

